{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-s.js","sourcesContent":["/**\r\n * 此文件存放主页调用的js代码\r\n * 包括 获取热销商品 推荐商品\r\n * 首页商品加入购物车事件\r\n * 底部轮播\r\n * 滑动事件\r\n */\r\n(()=>{\r\n    //根据类别获取热销商品\r\n    //PHP随机获取八条数据返回\r\n    function getOnsale(ftype){\r\n        $.ajax({\r\n            url:\"data/index_onsale.php\",\r\n            type:\"get\",\r\n            ftype:ftype,\r\n            error: function () {\r\n                alert(\"网络故障\");\r\n            },\r\n\t\t\tsuccess:function(data){\r\n\t\t\t\tvar html=\"\";\r\n            for(var x in data){\r\n\r\n                html+=`<div class=\" col-xs-6  col-md-3 text-center p_list\">\r\n                            <div class=\"li_ctx\">\r\n                            <a href=\"product_detail.html?fid=${data[x].fid}\">\r\n                                <img  src=\"${data[x].lg}\" alt=\"\">\r\n                            </a>\r\n                            <p class=\"title\">${data[x].title}</p>\r\n                            <p class=\"price\">￥${data[x].price}</p>\r\n                            <p class=\"add_cart\"><a data-fid=\"${data[x].fid}\" href=\"#\">加入购物车</a></p>\r\n                             </div>\r\n                      </div>`;\r\n\r\n                if(x>=4){\r\n                    $(\".row2\").html(html);\r\n                }else  $(\".row1\").html(html);\r\n                if(x==3){\r\n                    html='';\r\n                }\r\n\r\n            }\r\n\t\t\t}\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n    getOnsale(\"\");\r\n    //为导航绑定事件\r\n    /*热销导航按钮事件*/\r\n    $(\".onsale\").off().on(\"click\",\"p\",function(){\r\n        if(!$(this).parent().hasClass(\"active\")){\r\n            getOnsale($(this).parent().index());\r\n            $(this).parent().addClass(\"active\").siblings().removeClass(\"active\");\r\n\r\n        }\r\n    });\r\n\r\n    /*首页加入购物车事件*/\r\n    $(\".salelist\").off().on(\"click\",\"p.add_cart a\",function(e){\r\n        e.preventDefault();\r\n        var a = $(this);\r\n        $.ajax({\r\n            url:\"data/addcart.php\",\r\n            type:\"get\",\r\n            data:{\r\n                fid:a.data(\"fid\"),\r\n                fcount:1\r\n            },\r\n            success:function(data){\r\n                console.log(data);\r\n                if(data.ok==1){\r\n                    alertMsg(\"添加成功\",\"添加成功\",true,\"继续购物\",\"去购物车结算\",function(){location.href=\"cart.html\"});\r\n                    upcount();\r\n                }else{\r\n                    alertMsg(\"请先登录\",\"请先登录\",false,\"关闭\",\"关闭\",function(){location.href=\"login.html\"});\r\n                }\r\n\r\n            },\r\n            error:function(){\r\n                alertMsg(\"添加失败\",\"添加失败\",false,\"关闭\",\"关闭\",function(){});\r\n\r\n            }\r\n\r\n        });\r\n\r\n    });\r\n\r\n\r\n\r\n    /*~底部轮播~ 无限滚动*/\r\n    var box1 = $(\".bigbox>.box1\");\r\n    var box2 = $(\".bigbox>.box2\");\r\n\r\n    $.ajax({\r\n        url:\"data/index_onsale.php\",\r\n        type:\"get\",\r\n        data:\"fcount=4\",\r\n        success:function(data){\r\n          var html=\"\";\r\n            for(var x in data){\r\n                var f= data[x];\r\n                html+=`<div class=\"text-center p_list\">\r\n                         <div class=\"li_ctx\">\r\n                            <a href=\"product_detail.html?fid=${f.fid}\">\r\n                                <img  src=\"${f.lg}\" alt=\"\">\r\n                            </a>\r\n                            <p class=\"title\">${f.title}</p>\r\n                            <p class=\"price\">￥${f.price}</p>\r\n                            <p class=\"add_cart\"><a data-fid=\"${f.fid}\" href=\"#\">加入购物车</a></p>\r\n                         </div>\r\n                      </div>`;\r\n\r\n            }\r\n           box1.html(html);\r\n           box2.html(html);\r\n            //滚动定时器\r\n            var sTimer=setInterval(oSlide,40);\r\n\r\n        },\r\n        error: function () {\r\n            alert(\"网络故障\");\r\n        }\r\n\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n\r\n    //获取Left值\r\n    function getLeft(obj){\r\n        return obj.css('left').replace('px','');\r\n    }\r\n    //设置Left值\r\n    function setLeft(obj,len){\r\n        var oLeft=parseInt(obj.css('left').replace('px',''));\r\n        obj.css('left',oLeft-len+\"px\");\r\n    }\r\n//    //滑动事件\r\n    function oSlide(){\r\n        var BOXWIDTH = box2[0].offsetWidth;\r\n\r\n        if(getLeft(box1)>-BOXWIDTH){\r\n            setLeft(box1,1);\r\n        }else{\r\n            box1.css('left',BOXWIDTH+'px');\r\n        }\r\n\r\n        if(getLeft(box2)>-BOXWIDTH*2){\r\n            setLeft(box2,1);\r\n        }else{\r\n            box2.css('left',BOXWIDTH+'px');\r\n        }\r\n    }\r\n\r\n\r\n    /*顶部购物车数量加载*/\r\n    function upcount(){\r\n        $.ajax({\r\n            url:\"data/getcart.php\",\r\n            type:\"get\",\r\n            success:function(data){\r\n                if(data.ok!=0)\r\n                    $(\".top_cart>span:eq(0)\").html(data.length);\r\n                else  $(\".top_cart>span:eq(0)\").html(0);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /*弹出自定义模态框*/\r\n\r\n    function alertMsg(title,msg,isConfirm,btn1,btn2,callback){\r\n        var dialog= $(\"#alertmsg\");\r\n        dialog.find(\".modal-title\").html(title);\r\n        dialog.find(\".modal-body\").html(msg);\r\n        dialog.find(\".modal-footer>button:eq(0)\").html(btn1);\r\n\r\n        if(!isConfirm){\r\n            dialog.find(\".modal-footer>button:eq(1)\").addClass(\"hide\");\r\n        }\r\n\r\n        dialog.find(\".modal-footer>button:eq(1)\").html(btn2).off().on(\"click\",callback);\r\n        dialog.modal(\"show\");\r\n    }\r\n\r\n})();"]}