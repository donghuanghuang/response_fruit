{"version":3,"sources":["pro_add.js"],"names":[],"mappings":";;AAAA;;;AAGA,EAAE,YAAU;AACR,QAAI,OAAO,EAAE,OAAF,CAAX;;AAEA,SAAK,MAAL,CAAY,UAAS,CAAT,EAAW;AACnB,YAAI,QAAQ,KAAK,KAAjB;AACA,YAAG,MAAM,MAAN,GAAa,CAAhB,EAAkB;AACd,kBAAM,WAAN;AACA,cAAE,cAAF;AACA,iBAAK,KAAL,GAAW,EAAX;AACH;;AAID,YAAI,OAAK,EAAT;;AAEA,aAAI,IAAI,IAAE,CAAV,EAAY,IAAE,MAAM,MAApB,EAA2B,GAA3B,EAA+B;AAC3B,gBAAI,OAAO,MAAM,CAAN,CAAX;AACA,gBAAG,KAAK,IAAL,CAAU,OAAV,CAAkB,OAAlB,KAA4B,CAAC,CAAhC,EAAkC;AAC9B,sBAAM,QAAN;AACA,kBAAE,cAAF;AACA,qBAAK,KAAL,GAAW,EAAX;AACA;AACH,aALD,MAKM,IAAG,KAAK,KAAL,CAAW,KAAK,IAAL,GAAU,IAArB,IAA2B,IAA9B,EAAmC;AACrC,sBAAM,YAAN;AACA,kBAAE,cAAF;AACA,qBAAK,KAAL,GAAW,EAAX;AACA;AACH;;AAED,gBAAI,MAAM,OAAO,GAAP,CAAW,eAAX,CAA2B,IAA3B,KAAoC,OAAO,SAAP,CAAiB,eAAjB,CAAiC,IAAjC,CAA9C;;AAEA,gBAAI,MAAM,eAAa,GAAb,GAAiB,gCAAjB,GAAkD,KAAK,IAAvD,GAA4D,MAAtE;;AAEA;;AAED;;;AAGC,oBAAM,oCAAkC,GAAlC,GAAsC,QAA5C;;AAEA;AAEH;AACD,UAAE,gBAAF,EAAoB,IAApB,CAAyB,IAAzB;;AAKD;;;;;;;;;;;;AAaF,KA1DD;;AA6DA,MAAE,eAAF,EAAmB,EAAnB,CAAsB,QAAtB,EAAgC,UAAU,CAAV,EAAa;;AAEzC,UAAE,cAAF;AACA,YAAI,KAAI,IAAI,QAAJ,EAAR;AACA;;AAEA,WAAG,MAAH,CAAU,OAAV,EAAkB,EAAE,QAAF,EAAY,GAAZ,EAAlB;AACA,WAAG,MAAH,CAAU,UAAV,EAAqB,EAAE,WAAF,EAAe,GAAf,EAArB;AACA,WAAG,MAAH,CAAU,OAAV,EAAkB,EAAE,QAAF,EAAY,GAAZ,EAAlB;AACA,WAAG,MAAH,CAAU,MAAV,EAAiB,EAAE,OAAF,EAAW,GAAX,EAAjB;AACA,WAAG,MAAH,CAAU,MAAV,EAAiB,EAAE,OAAF,EAAW,GAAX,EAAjB;AACA,WAAG,MAAH,CAAU,OAAV,EAAkB,EAAE,QAAF,EAAY,GAAZ,EAAlB;AACA,WAAG,MAAH,CAAU,OAAV,EAAkB,EAAE,QAAF,EAAY,GAAZ,EAAlB;AACA,WAAG,MAAH,CAAU,UAAV,EAAqB,EAAE,UAAF,EAAc,GAAd,EAArB;;AAEA,YAAG,KAAK,CAAL,EAAQ,KAAR,CAAc,MAAd,IAAsB,CAAzB,EAA2B;AACvB,kBAAM,OAAN;AACA;AACH,SAHD,MAGK;AACD,iBAAI,IAAI,IAAE,CAAV,EAAY,IAAE,KAAK,CAAL,EAAQ,KAAR,CAAc,MAA5B,EAAmC,GAAnC,EAAuC;AACnC,mBAAG,MAAH,CAAU,QAAM,CAAhB,EAAkB,KAAK,CAAL,EAAQ,KAAR,CAAc,CAAd,CAAlB;AACH;AACJ;;AAED,UAAE,YAAF,EAAgB,IAAhB,CAAqB,SAArB,EAAgC,MAAhC,GAAyC,WAAzC,CAAqD,MAArD;AACA,UAAE,IAAF,CAAO;AACH,iBAAI,iBADD;AAEH,kBAAK,MAFF;AAGH,kBAAK,EAHF;AAIH,yBAAY,KAJT;AAKH,yBAAY,KALT;AAMH,qBAAQ,iBAAS,IAAT,EAAc;AAClB,oBAAG,KAAK,IAAL,IAAW,CAAd,EAAgB;AACZ,sBAAE,YAAF,EAAgB,IAAhB,CAAqB,MAArB;AACA,0BAAM,KAAK,GAAX;AACH,iBAHD,MAGK;AACD,sBAAE,YAAF,EAAgB,IAAhB,CAAqB,MAArB;AACA,0BAAM,MAAN;AACA,6BAAS,MAAT;AACH;AACJ;AAfE,SAAP;AAiBA,eAAO,KAAP;AAEH,KA5CD;AA8CH,CA9GD","file":"pro_add-s.js","sourcesContent":["/**\r\n * Created by web-01 on 2017/11/1.\r\n */\r\n$(function(){\r\n    var pimg = $(\"#pimg\");\r\n\r\n    pimg.change(function(e){\r\n        var files = this.files;\r\n        if(files.length>4){\r\n            alert(\"图片不能超过四张!\");\r\n            e.preventDefault();\r\n            this.value=\"\";\r\n        }\r\n\r\n\r\n\r\n        var html=\"\";\r\n\r\n        for(var i=0;i<files.length;i++){\r\n            var file = files[i];\r\n            if(file.type.indexOf(\"image\")==-1){\r\n                alert(\"只能上传图片\");\r\n                e.preventDefault();\r\n                this.value=\"\";\r\n                break;\r\n            }else if(Math.floor(file.size/1024)>2048){\r\n                alert(\"图片大小不能超过2M\");\r\n                e.preventDefault();\r\n                this.value=\"\";\r\n                break;\r\n            }\r\n\r\n            var img = window.URL.createObjectURL(file) || window.webkitURL.createObjectURL(file);\r\n\r\n            var str = \"<img src='\"+img+\"' class='img-responsive' /><p>\"+file.name+\"</p>\";\r\n\r\n            //var str =`<img src=\"${img}\" class=\"img-responsive\" /><p>${file.name}</p>`;\r\n\r\n           /* html+=`<div class=\"col-xs-6 col-md-2\">\r\n                    ${str}\r\n                  </div>`;*/\r\n            html+=\"<div class='col-xs-6 col-md-2'>\"+str+\"</div>\";\r\n\r\n            //fd.append(\"pic\"+i,file);\r\n\r\n        }\r\n        $('.previews>.row').html(html);\r\n\r\n\r\n\r\n\r\n       /*\r\n       $.ajax({\r\n            url:\"data/addpro.php\",\r\n            type:\"post\",\r\n            data:fd,\r\n            contentType:false,\r\n            processData:false,\r\n            success:function(data){\r\n                console.log(data);\r\n            }\r\n        });\r\n       */\r\n\r\n    });\r\n\r\n\r\n    $(\"#form-product\").on(\"submit\", function (e) {\r\n\r\n        e.preventDefault();\r\n        var fd= new FormData();\r\n        //console.log($(\"#form-product\").serialize());\r\n\r\n        fd.append(\"title\",$(\"#title\").val());\r\n        fd.append(\"details1\",$(\"#subtitle\").val());\r\n        fd.append(\"price\",$(\"#price\").val());\r\n        fd.append(\"size\",$(\"#size\").val());\r\n        fd.append(\"sday\",$(\"#sday\").val());\r\n        fd.append(\"smidu\",$(\"#smidu\").val());\r\n        fd.append(\"ssize\",$(\"#ssize\").val());\r\n        fd.append(\"details2\",$(\"#details\").val());\r\n\r\n        if(pimg[0].files.length==0){\r\n            alert(\"请选择图片\");\r\n            return;\r\n        }else{\r\n            for(var i=0;i<pimg[0].files.length;i++){\r\n                fd.append(\"pic\"+i,pimg[0].files[i]);\r\n            }\r\n        }\r\n\r\n        $(\".prog>span\").html(\"正在上传...\").parent().removeClass('hide');\r\n        $.ajax({\r\n            url:\"data/addpro.php\",\r\n            type:\"post\",\r\n            data:fd,\r\n            contentType:false,\r\n            processData:false,\r\n            success:function(data){\r\n                if(data.code!=1){\r\n                    $(\".prog>span\").html(\"上传失败\");\r\n                    alert(data.msg);\r\n                }else{\r\n                    $(\".prog>span\").html(\"上传成功\");\r\n                    alert(\"添加成功\");\r\n                    location.reload();\r\n                }\r\n            }\r\n        });\r\n        return false;\r\n\r\n    });\r\n\r\n});"]}