{"version":3,"sources":["order_list.js"],"names":[],"mappings":"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","file":"order_list-s.js","sourcesContent":["/**\r\n * Created by web-01 on 2017/11/14.\r\n */\r\n(function(){\r\n    var lists = new Vue({\r\n        el:'#plist',\r\n        data:{\r\n            pno:1,\r\n            pageSize:8,\r\n            maxPage:1,\r\n            datas:[],\r\n            disabled:false\r\n        },\r\n        created:function(){\r\n            this.getlistbypno(this.pno);\r\n        },\r\n        methods:{\r\n            getlistbypno:function(pno){\r\n\r\n                $.ajax({\r\n                    url:\"data/getlist.php\",\r\n                    type:\"get\",\r\n                    data:{\r\n                        pno:pno,\r\n                        pageSize:8\r\n                    },\r\n                    success:function(data){\r\n                        lists.datas=data.data;\r\n                        lists.pno=parseInt(data.pno);\r\n                        lists.maxPage=parseInt(data.maxPage);\r\n                        console.log(data);\r\n                        lists.bindpageBtn();\r\n                    }\r\n                });\r\n            },\r\n            bindpageBtn:function(){\r\n                var pages=$(\"#pagination\");\r\n                pages.off().on(\"click\",\"a\",function(e){\r\n                    e.preventDefault();\r\n                    if(!$(this).parent().hasClass(\"disabled\")){\r\n                        var pno = $(this).attr(\"href\");\r\n                        lists.getlistbypno(pno);\r\n                    }\r\n\r\n                });\r\n            },\r\n            getdetail:function(lid){\r\n                var amsg =$(\"#alertmsg\");\r\n                $.ajax({\r\n                    url:\"data/getlistdetail.php\",\r\n                    type:\"get\",\r\n                    data:{\r\n                        lid\r\n                    },\r\n                    success:function(data){\r\n                        if(data.code!=-1){\r\n                            var amsg =$(\"#showinfo\");\r\n                           var html = `\r\n                             <p>订单编号:${data.lid}</p>\r\n                             <p>收货地址:${data.uaddress}</p>\r\n                             <p>总价:${data.totalprice}</p>\r\n                             <p>备注信息:${data.common}</p>\r\n                             `;\r\n\r\n                            amsg.find('.modal-body').html(html);\r\n                            amsg.modal('show').find(\".modal-title\").html(\"订单详情\");\r\n                        }\r\n\r\n\r\n                    }\r\n                });\r\n\r\n            },\r\n            changestate(lid){\r\n                var amsg = $('#alertmsg');\r\n                var html = `\r\n                    <div class=\"form-group\">\r\n                      <label for=\"state\">状态:</label>\r\n                       <select name=\"state\" id=\"state\" class=\"form-control\">\r\n                       <option value=\"-2\">\r\n                       未付款\r\n                        </option>\r\n                       <option value=\"-1\">\r\n                       订单已取消\r\n                       </option>\r\n                        \r\n                        <option value=\"0\">\r\n                       等待处理\r\n                        </option>\r\n                        \r\n                          \r\n                       <option value=\"1\">\r\n                       等待发货\r\n                       </option>\r\n                        \r\n                        <option value=\"2\">\r\n                       等待收货\r\n                        </option>\r\n                        \r\n                      <option value=\"3\">\r\n                       交易成功\r\n                        </option>\r\n                       </select>\r\n                    </div>`;\r\n                amsg.find('.modal-body').html(html);\r\n                amsg.modal('show').find(\".modal-title\").html(\"修改订单状态\");\r\n                amsg.parent().off().on('submit',function(e){\r\n                    var state = $(\"[name='state']\").val();\r\n                    $.ajax({\r\n                        url:\"data/changeliststate.php\",\r\n                        type:\"post\",\r\n                        data:{lid,state},\r\n                        success:function(data){\r\n                            if(data.code<=0){\r\n                                alert(\"更新失败\");\r\n                            }else{\r\n                                alert(\"更新成功\");\r\n                                amsg.modal('hide').find('.modal-body').html(\"\");\r\n                                tlist.getlistbypno(this.pno);\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                });\r\n            }\r\n        },\r\n\r\n        filters:{//过滤器\r\n            format:function(date){\r\n                date=new Date(parseInt(date));\r\n                var y = date.getFullYear();\r\n                var M = date.getMonth()+1;\r\n\r\n                var d = date.getDate();\r\n\r\n\r\n                var h = date.getHours();\r\n\r\n                var m = date.getMinutes();\r\n                m<10&&(m=\"0\"+m);\r\n\r\n                var s = date.getSeconds();\r\n                s<10&&(s=\"0\"+s);\r\n\r\n                return y+\"/\"+M+\"/\"+d+\" \"+h+\":\"+m+\":\"+s;\r\n            },\r\n\r\n            fstate:function(state){\r\n                var lstate = '未付款';\r\n                switch(parseInt(state)){\r\n                    case -2:\r\n                        lstate = \"未付款\";\r\n                        break;\r\n                    case -1:\r\n                        lstate = \"订单已取消\";//管理员操作\r\n                        break;\r\n                    case 0:\r\n                        lstate = \"等待处理\";//\r\n                        break;\r\n                    case 1:\r\n                        lstate = \"等待发货\";//\r\n                        break;\r\n                    case 2:\r\n                        lstate = \"等待收货\";//管理员操作\r\n                        break;\r\n                    case 3:\r\n                        lstate = \"交易成功\";////\r\n                        break;\r\n                    default :\r\n                        lstate=\"未付款\";\r\n                        break;\r\n                }\r\n                return lstate;\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n\r\n    function format(date){\r\n\r\n        var y = date.getFullYear();\r\n        var M = date.getMonth()+1;\r\n\r\n        var d = date.getDate();\r\n\r\n\r\n        var h = date.getHours();\r\n\r\n        var m = date.getMinutes();\r\n        m<10&&(m=\"0\"+m);\r\n\r\n        var s = date.getSeconds();\r\n        s<10&&(s=\"0\"+s);\r\n\r\n        return y+\"年\"+M+\"月\"+d+\"日 \"+h+\":\"+m+\":\"+s;\r\n    }\r\n\r\n\r\n})();"]}