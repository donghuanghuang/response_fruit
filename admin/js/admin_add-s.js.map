{"version":3,"sources":["admin_add.js"],"names":[],"mappings":"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","file":"admin_add-s.js","sourcesContent":["/**\r\n *\r\n *\r\n */\r\n$(function(){\r\n\r\n    var tlist = new Vue({\r\n        el:'#tlist',\r\n        data:{\r\n            pno:1,\r\n            pageSize:8,\r\n            maxPage:1,\r\n            datas:[],\r\n            disabled:false\r\n\r\n        },\r\n        created:function(){\r\n            this.getlistbypno(this.pno);\r\n        },\r\n        methods: {\r\n            getlistbypno:function(pno){\r\n                $.ajax({\r\n                    url:\"data/getadmin.php\",\r\n                    type:\"get\",\r\n                    data:{\r\n                        pno:pno,\r\n                        pageSize:8\r\n                    },\r\n                    success:function(data){\r\n                        if(data.code==-1){\r\n                            console.log(tlist.disabled);\r\n                            tlist.datas=data;\r\n                            tlist.disabled=true;\r\n                             tlist.bindpageBtn();\r\n                            //alert(\"没有权限..\");\r\n                        }else{\r\n                            tlist.datas=data.data;\r\n                            tlist.pno=parseInt(data.pno);\r\n                            tlist.maxPage=parseInt(data.maxPage);\r\n                            tlist.bindpageBtn();\r\n                            tlist.bindaddBtn();\r\n                            //tlist.getpagelist();\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n            bindpageBtn:function(){\r\n                var pages=$(\"#pagination\");\r\n                pages.off().on(\"click\",\"a\",function(e){\r\n                    e.preventDefault();\r\n                    if(!$(this).parent().hasClass(\"disabled\")){\r\n                        var pno = $(this).attr(\"href\");\r\n                        tlist.getlistbypno(pno);\r\n                    }\r\n\r\n                });\r\n            },\r\n            bindaddBtn: function () {\r\n                $(\".add_admin\").click(function(){\r\n                    if(!$(this).hasClass(\"disabled\")){\r\n                        var amsg =$(\"#alertmsg\");\r\n\r\n                        var html = `\r\n                    <div class=\"form-group\">\r\n                      <label for=\"aname\">输入管理账户:</label>\r\n                      <input type=\"text\" class=\"form-control\" required name=\"aname\" \"/>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                      <label for=\"apwd\">输入管理密码:</label>\r\n                      <input type=\"password\"  class=\"form-control\"  required name=\"apwd\" \"/>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                      <label for=\"power\">权限:</label>\r\n                       <select name=\"power\" id=\"power\" class=\"form-control\">\r\n                        <option value=\"1\">\r\n                        普通管理员\r\n                        </option>\r\n                        <option value=\"0\">\r\n                        超级管理员\r\n                        </option>\r\n                       </select>\r\n                    </div>`;\r\n                        amsg.find('.modal-body').html(html);\r\n                        amsg.modal('show').find(\".modal-title\").html(\"添加管理用户\");\r\n\r\n                        amsg.parent().off().on('submit',function(e){\r\n                            e.preventDefault();\r\n                            var aname=$(\"[name='aname']\").val();\r\n                            var apwd=$(\"[name='apwd']\").val();\r\n                            var power=$(\"[name='power']\").val();\r\n                            $.ajax({\r\n                                url:\"data/addadmin.php\",\r\n                                type:\"post\",\r\n                                data:{\r\n                                    aname:aname,\r\n                                    apwd:apwd,\r\n                                    power:power\r\n                                },\r\n                                success:function(data){\r\n                                    if(data.code<=0){\r\n                                        alert(data.msg);\r\n                                    }else{\r\n                                        alert(\"添加成功\");\r\n                                        amsg.modal('hide').find('.modal-body').html(\"\");\r\n                                        tlist.getlistbypno(this.pno);\r\n                                    }\r\n\r\n                                }\r\n                            });\r\n\r\n                        });\r\n                    }\r\n                });\r\n            },\r\n            changstate:function(exp,e){\r\n                var btn = $(e.target);\r\n                if(!btn.hasClass(\"disabled\")){\r\n                    //console.log(btn);\r\n                    //console.log(btn.data('exp'));\r\n                    $.ajax({\r\n                        url:\"data/changestate.php\",\r\n                        type:\"post\",\r\n                        data:{\r\n                            aid:btn.data('id'),\r\n                            exp:exp\r\n                        },\r\n                        success:function(data){\r\n                            if(data.code<=0){\r\n                                alert(data.msg);\r\n                            }else{\r\n                                tlist.getlistbypno(this.pno);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n\r\n            },\r\n            upAdmin:function(aid,e){\r\n                var btn =$(e.target);\r\n                if(!btn.hasClass(\"disabled\")){\r\n                    var amsg =$(\"#alertmsg\");\r\n                    console.log(aid);\r\n                    var html = `\r\n                    <div class=\"form-group\">\r\n                      <label for=\"apwd\">输入新管理密码:</label>\r\n                      <input type=\"password\"  class=\"form-control\"  required name=\"apwd\" \"/>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                      <label for=\"power\">权限:</label>\r\n                       <select name=\"power\" id=\"power\" class=\"form-control\">\r\n                        <option value=\"1\">\r\n                        普通管理员\r\n                        </option>\r\n                        <option value=\"0\">\r\n                        超级管理员\r\n                        </option>\r\n                       </select>\r\n                    </div>`;\r\n                    amsg.find('.modal-body').html(html);\r\n                    amsg.modal('show').find(\".modal-title\").html(\"修改管理用户\");\r\n\r\n                    amsg.parent().off().on('submit',function(e){\r\n                        e.preventDefault();\r\n                        var apwd = $(\"[name='apwd']\").val();\r\n                        var power = $(\"[name='power']\").val();\r\n\r\n                        $.ajax({\r\n                            url:\"data/upadmin.php\",\r\n                            type:\"post\",\r\n                            data:{\r\n                                aid,\r\n                                apwd,\r\n                                power\r\n                            },\r\n                            success:function(data){\r\n                                if(data.code<=0){\r\n                                    alert(data.msg);\r\n                                }else{\r\n                                    alert(\"修改成功\");\r\n                                    amsg.modal('hide').find('.modal-body').html(\"\");\r\n                                    tlist.getlistbypno(this.pno);\r\n                                }\r\n\r\n                            }\r\n                        });\r\n\r\n                    });\r\n                }\r\n            }\r\n\r\n        }\r\n    });\r\n\r\n\r\n/*\r\n\r\n*/\r\n});\r\n"]}